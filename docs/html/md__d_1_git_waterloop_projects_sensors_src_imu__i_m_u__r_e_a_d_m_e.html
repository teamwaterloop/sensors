<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sensors: IMU Sensors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sensors
   </div>
   <div id="projectbrief">Sensors acts as a central repository to contain the code for all the arduino sensors being worked on</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="class_i_m_u.html">IMU</a> Sensors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This controls all the <a class="el" href="class_i_m_u.html">IMU</a> sensors on the pod. Each sensor contains three types of sub sensors. These sub sensors are <code>GyroScope</code>, <code>Accelerometer</code> and <code>Magnetometer</code>. The data gathered from each sensor is in JSON format.</p>
<p>Example JSON data returned:</p>
<div class="fragment"><div class="line"><span class="comment">// This contains data from Gyroscope</span></div><div class="line">{<span class="stringliteral">&quot;time&quot;</span>:1009,<span class="stringliteral">&quot;sensor&quot;</span>:<span class="stringliteral">&quot;gyro&quot;</span>,<span class="stringliteral">&quot;data&quot;</span>:[-1.54875,12.19750,11.36625]}</div><div class="line"></div><div class="line"><span class="comment">// This contains data from only Accelerometer</span></div><div class="line">{<span class="stringliteral">&quot;time&quot;</span>:1009,<span class="stringliteral">&quot;sensor&quot;</span>:<span class="stringliteral">&quot;accelerometer&quot;</span>,<span class="stringliteral">&quot;data&quot;</span>:[-0.02300,-0.02300,-0.02300]}</div><div class="line"></div><div class="line"><span class="comment">// This contains data from only Magnetometer</span></div><div class="line">{<span class="stringliteral">&quot;time&quot;</span>:1009,<span class="stringliteral">&quot;sensor&quot;</span>: <span class="stringliteral">&quot;magnetometer&quot;</span>, <span class="stringliteral">&quot;data&quot;</span>:[0.41986,0.41986,0.41986]}</div></div><!-- fragment --><p>More about data recieved is mentioned later on.</p>
<h2>How to Use</h2>
<p>This set of sensors are controlled by <code><a class="el" href="class_i_m_u_pool.html" title="This class holds number of IMU sensors&#39; objects and handles data from all of them. It provides access to data in both JSON and raw format. ">IMUPool</a></code> class. An Object must be created of this class to gather data from all the sensor. To create an object, you have to pass in a parameter to specify how many imu sensors are on the pod</p>
<div class="fragment"><div class="line"><a class="code" href="class_i_m_u_pool.html">IMUPool</a> imus(2);            <span class="comment">// create 2 imu sensors</span></div></div><!-- fragment --><p>Before recording any sensor values, we have to check if all the imu sensors are working. To do this, call <code>sensorsWorking</code> method and it will return true to signal the working of all the sensors and false even if one sensor is not working</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (imus.sensorsWorking()){}    <span class="comment">// success</span></div><div class="line"><span class="keywordflow">else</span>{}                          <span class="comment">// failure</span></div></div><!-- fragment --><h3>Overview of functions to gather data</h3>
<p>Each component of <a class="el" href="class_i_m_u.html">IMU</a> sensor returns x, y and z values. Since the data is formatted in JSON format, the data received by any function call includes x, y and z for that particular sensor. JSON format also includes a time in milliseconds. This time is the time elapsed since the Arduino has started working.</p>
<p>Data in JSON format cannot be received as a string but rather you can print it directly to the Serial. To do this you can make a call <code>serialPrint</code>.</p>
<div class="fragment"><div class="line">imus.serialPrint(0, GYRO);        <span class="comment">// data for Gyroscope from sensor 0</span></div><div class="line">imus.serialPrint(1, ACCEL);    <span class="comment">// data for Accelerometer from sensor 1</span></div><div class="line">imus.serialPrint(1, MAG);         <span class="comment">// data for Magnetometer from sensor 1</span></div></div><!-- fragment --><p>If for some reason read fails for any component of any sensor, the output for that component will be <code>-99999.00000</code> for x, y and z axis. Since the value of any sensor component will never be <code>-99999.00000</code>, we can detect failure and take actions accordingly.</p>
<div class="fragment"><div class="line"><span class="comment">// In this data, Gyroscope read failed</span></div><div class="line">{<span class="stringliteral">&quot;time&quot;</span>:1039,<span class="stringliteral">&quot;sensor&quot;</span>:<span class="stringliteral">&quot;gyroscope&quot;</span>:[-99999.00000,-99999.00000,-99999.00000]}</div></div><!-- fragment --><p>Now that above functions return values for Serial communications, we may need values in float format so that our pod can utilize them. In order to do that, there are following functions:</p>
<div class="fragment"><div class="line">imus.getX(0, GYRO);                 <span class="comment">// x data for Gyroscope and from sensor 0</span></div><div class="line">imus.getY(1, ACCEL);                <span class="comment">// y data for Accelerometer and from sensor 1</span></div><div class="line">imus.getZ(1, MAG);                  <span class="comment">// z data for Magnetometer and from sensor 1</span></div></div><!-- fragment --><p>To get the number of sensors in the subsystem, call the method <code>getTotal</code>.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">imus.getTotal();                    // will return 2 based on our declaration of the object above</div></div><!-- fragment --><h2>Documentation of <a class="el" href="class_i_m_u.html">IMU</a> class used by <a class="el" href="class_i_m_u_pool.html" title="This class holds number of IMU sensors&#39; objects and handles data from all of them. It provides access to data in both JSON and raw format. ">IMUPool</a> class</h2>
<p><code><a class="el" href="class_i_m_u.html">IMU</a></code> class is used by <a class="el" href="class_i_m_u_pool.html" title="This class holds number of IMU sensors&#39; objects and handles data from all of them. It provides access to data in both JSON and raw format. ">IMUPool</a> to make everything work. A client can choose to use <code><a class="el" href="class_i_m_u.html">IMU</a></code> class if he/she wishes to do so. Keep in mind this class only supports one <a class="el" href="class_i_m_u.html">IMU</a> sensor and does not return data in JSON format. But, this class can be modified to change the functionality of each components for <a class="el" href="class_i_m_u.html">IMU</a> sensor. These changes will also show up on <code><a class="el" href="class_i_m_u_pool.html" title="This class holds number of IMU sensors&#39; objects and handles data from all of them. It provides access to data in both JSON and raw format. ">IMUPool</a></code>.</p>
<p>Create an object of this class.</p>
<div class="fragment"><div class="line"><a class="code" href="class_i_m_u.html">IMU</a> sensor;</div></div><!-- fragment --><p>If you are not satisfied by how <code>Gyroscope</code> or <code>Accelerometer</code> or <code>Magnetometer</code> component works and outputs data, you can change the settings of each component using <code>setup</code> methods. These methods have default values so you do not have to specify every parameter.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">// setupGyro() specifies the settings for the gyroscope.</div><div class="line">// * scale sets the full-scale range of the gyroscope. scale can be set to either 245, 500, or 2000</div><div class="line">// * sampleRatesets the output data rate (ODR) of the gyro</div><div class="line">//   sampleRate can be set between 1-6</div><div class="line">//   1 = 14.9    4 = 238</div><div class="line">//   2 = 59.5    5 = 476</div><div class="line">//   3 = 119     6 = 952</div><div class="line">// * flipX, flipY, and flipZ are booleans that can automatically switch the positive/negative</div><div class="line">//   orientation of the three gyro axes.</div><div class="line">void setupGyro(int scale=245, int sampleRate=3, bool flipX=false, bool flipY=false, bool flipZ=false);</div><div class="line"></div><div class="line">// setupAccel() specifies the settings for the accelerometer.</div><div class="line">// * scale sets the full-scale range of accelerometer. The scale can be 2, 4, 8 or 16</div><div class="line">// * sampleRate sets the output data rate of the accelerometer. If Gyroscope is running,</div><div class="line">//   the sample rate is same as gyroscope. Same rate can be be 1-6:</div><div class="line">//   1 = 10 Hz    4 = 238 Hz</div><div class="line">//   2 = 50 Hz    5 = 476 Hz</div><div class="line">//   3 = 119 Hz   6 = 952 Hz</div><div class="line">void setupAccel(int scale=8, int sampleRate=1);</div><div class="line"></div><div class="line">// setupMag() specifies the settings for the magnetometer.</div><div class="line">// * scale sets the full-scale range of the magnetometer. Mag scale can be 4, 8, 12, or 16</div><div class="line">// * sampleRate sets the output data rate (ODR) of the magnetometer.</div><div class="line">//   mag data rate can be 0-7:</div><div class="line">//   0 = 0.625 Hz  4 = 10 Hz</div><div class="line">//   1 = 1.25 Hz   5 = 20 Hz</div><div class="line">//   2 = 2.5 Hz    6 = 40 Hz</div><div class="line">//   3 = 5 Hz      7 = 80 Hz</div><div class="line">// * tempComp enables or disables temperature compensation of the magnetometer.</div><div class="line">// * operatingMode sets the operating mode of the magnetometer. operatingMode can be 0-2:</div><div class="line">//   0 = continuous conversion</div><div class="line">//   1 = single-conversion</div><div class="line">//   2 = power down</div><div class="line">void setupMag(int scale=12, int sampleRate=5, bool tempComp=false, int operatingMode=0);</div></div><!-- fragment --><p>You can get data from each data component of the sensor by using <code>get</code> methods. Before getting these x, y and z values, you have to read the sensor. To read the sensor, use the <code>read</code> method. This method returns true if the read was successful and false if it was unsuccessful.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">read(GYRO);       // read GYRO</div><div class="line">read(ACCEL);      // reada ACCEL</div><div class="line">read(MAG);        // read MAG</div></div><!-- fragment --><p>After the read is successful, you can go ahead and get data from that component. Data acquired from each component is of type <code>float</code> and it is precise to <code>5 decimal points</code>.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">// X values</div><div class="line">getX(GYRO);       // GYRO X Value</div><div class="line">getX(ACCEL);      // ACCEL X Value</div><div class="line">getX(MAG);        // MAG X Value</div><div class="line"></div><div class="line">// Y values</div><div class="line">getY(GYRO);       // GYRO Y Value</div><div class="line">getY(ACCEL);      // ACCEL Y Value</div><div class="line">getY(MAG);        // MAG Y Value</div><div class="line"></div><div class="line">// Z values</div><div class="line">getZ(GYRO);       // GYRO Z Value</div><div class="line">getZ(ACCEL);      // ACCEL Z Value</div><div class="line">getZ(MAG);        // MAG Z Value</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
